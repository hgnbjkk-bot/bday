<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Birthday Card</title>
    <!-- Google Font-->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins&display=swap"
      rel="stylesheet"
    />
    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="decorations" aria-hidden="true" role="presentation">
      <img class="emoji e1" src="icons/heart.svg" alt="" aria-hidden="true" role="presentation" focusable="false">
      <img class="emoji e2" src="icons/sparkle.svg" alt="" aria-hidden="true" role="presentation" focusable="false">
      <img class="emoji e10" src="icons/sanrio-hello.svg" alt="" aria-hidden="true" role="presentation" focusable="false">
      <img class="emoji e11" src="icons/sanrio-melody.svg" alt="" aria-hidden="true" role="presentation" focusable="false">
      <img class="emoji e12" src="icons/sanrio-keroppi.svg" alt="" aria-hidden="true" role="presentation" focusable="false">
      <img class="emoji e13" src="icons/sanrio-cinna.svg" alt="" aria-hidden="true" role="presentation" focusable="false">
      <span class="emoji e3" aria-hidden="true" role="presentation">ğŸˆ</span>
      <span class="emoji e4" aria-hidden="true" role="presentation">ğŸ‚</span>
      <span class="emoji e5" aria-hidden="true" role="presentation">ğŸŒ¸</span>
      <span class="emoji e6" aria-hidden="true" role="presentation">ğŸ‰</span>
      <img class="emoji e7 sparkle" src="icons/sparkle.svg" alt="" aria-hidden="true" role="presentation" focusable="false">
      <img class="emoji e8 sparkle" src="icons/sparkle.svg" alt="" aria-hidden="true" role="presentation" focusable="false">
      <img class="emoji e9 sparkle" src="icons/sparkle.svg" alt="" aria-hidden="true" role="presentation" focusable="false">
    </div>
    <!-- Background music: place your file `illit_not_cute_anymore.mp3` in the same folder -->
    <audio id="bg-music" src="Notcuteanymore.mp3" preload="auto" loop data-track="illit - not cute anymore"></audio>

    <div class="card-wrap">
    <div class="card">
      <div class="outside">
        <div class="front">
          <p>HAPPY BIRTHDAYYY! Gelassuiiii</p>
          <img class="cute-img" src="mymelody.png" alt="cute">
          <!-- sticker sits on the outside/front face so it flips with the cover -->
          <img src="icons/heart.svg" class="card-sticker" alt="" aria-hidden="true" role="presentation"/>
        </div>
        <div class="back"></div>
      </div>
      <div class="inside">
        <p>Wishing gelato a very Happy Birthday filled with love and adobos, keep smiling no matter what and always stay cute and pretty!! Scroll down for some</p>
        <div style="text-align: center; margin-top: 20px;">
          <img src="nailong.png" alt="nailong" style="width: 100px; height: auto;">
        </div>
        <!-- music toggle placed inside the card (bottom-left) -->
        <button id="music-toggle" aria-pressed="false" aria-label="Play 'illit - not cute anymore'" title="Play 'illit - not cute anymore'">
          <!-- play icon -->
          <svg class="icon icon-play" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M8 5v14l11-7z"></path>
          </svg>
          <!-- pause icon -->
          <svg class="icon icon-pause" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M6 5h4v14H6zM14 5h4v14h-4z"></path>
          </svg>
        </button>
      </div>
    </div>
    </div>
    <div class="memories">
      <h2>Our Memories of gag ğŸ’—</h2>

      <div class="memory">
        <img src="gag.png" alt="">
        <p>The gag journey you started for us all! â¤ï¸</p>
      </div>

      <div class="memory">
        <img src="gagdance.png" alt="">
        <p>admin abuse hits diff âœ¨</p>
      </div>

      <div class="memory">
        <img src="gaggng.png" alt="">
        <p>our gng ğŸ’•</p>
      </div>
      <div class="memory">
        <img src="twin.png">
        <p>Twin moment</p>
      </div>
      <div class="memory">
        <img src="stuck.png">
        <p>Glitchy moments</p>
      </div>
    </div>
    </div>
    <div class="memories">
      <h2>Now memories of all cuz i cant understand this coding anymore hahaahah ğŸ’—</h2>

      <div class="memory">
        <img src="fisch.png" alt="">
        <p>We love fisch â¤ï¸</p>
      </div>
      
      <div class="memory">
        <img src="fisch2.png" alt="">
        <p> âœ¨</p>
      </div>

      <div class="memory">
        <img src="fisch3.png" alt="">
        <p>ğŸ’•</p>
      </div>

      <div class="memory">
        <img src="fisch4.png">
        <p>ğŸ¥°</p>
      </div>

      <div class="memory">
        <img src="krpd.png">
        <p>Dancing time</p>
      </div>

      <div class="memory">
        <img src="kprd2.png" alt="">
        <p>ğŸ’•</p>
      </div>

      <div class="memory">
        <img src="koya.png" alt="">
        <p>ğŸ’•</p>
      </div>

      <div class="memory">
        <img src="booth.png" alt="">
        <p>laggy boothğŸ’•</p>
      </div>

      <div class="memory">
        <img src="booths.png" alt="">
        <p>ğŸ’•</p>
      </div>

      <div class="memory">
        <img src="pbooth.png" alt="">
        <p>ğŸ’•</p>
      </div>

      <div class="memory">
        <img src="pbooths.png" alt="">
        <p>ğŸ’•</p>
      </div>

      <div class="memory">
        <img src="pinkbooth.png" alt="">
        <p>ğŸ’•</p>
      </div>

      <div class="memory">
        <img src="bob.png" alt="">
        <p>BOB ERAAğŸ’•</p>
      </div>

      <div class="memory">
        <img src="hunty.png" alt="">
        <p>When we were slayingğŸ’•</p>
      </div>

      <div class="memory">
        <img src="ramen.png" alt="">
        <p>Our RAMEN SHOPP ITS CLOSED FOR YEARS LKMAOOO</p>
      </div>

      <div class="memory">
        <img src="wolf.png" alt="">
        <p>Brookhaven moment</p>
      </div>

      <div class="memory">
        <img src="princess.png" alt="">
        <p>Pretty princessğŸ’•</p>
      </div>

      <div class="memory">
        <img src="3motes.gif" alt="">
        <p>Last but not Least</p>
      </div>
    </div>
  </body>
  <script>
    // Tap-to-open for mobile: toggle .opened on the card when tapped
    (function(){
      const card = document.querySelector('.card');
      if(!card) return;

      function handleTap(e){
        // on small viewports, toggle open on tap
        if(window.innerWidth <= 700){
          card.classList.toggle('opened');
        }
      }

      card.addEventListener('click', handleTap);

      // keyboard accessibility: Enter/Space toggles open
      card.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          card.classList.toggle('opened');
        }
      });
    })();
  </script>

  <script>
    // Background music controller: toggle play/pause and remember preference
    (function(){
      const audio = document.getElementById('bg-music');
      const btn = document.getElementById('music-toggle');
      if(!audio || !btn) return;

      const STATE_KEY = 'bday_music_playing';

      function updateButton(playing){
        const track = audio.dataset.track || '';
        btn.setAttribute('aria-pressed', playing ? 'true' : 'false');
        btn.title = playing ? `Pause: ${track}` : `Play: ${track}`;
        btn.setAttribute('aria-label', playing ? `Pause ${track}` : `Play ${track}`);
        btn.classList.toggle('playing', !!playing);
      }

      async function tryPlay(){
        try{
          await audio.play();
          updateButton(true);
          localStorage.setItem(STATE_KEY, '1');
          return true;
        }catch(err){
          updateButton(false);
          localStorage.setItem(STATE_KEY, '0');
          return false;
        }
      }

      function pause(){
        audio.pause();
        updateButton(false);
        localStorage.setItem(STATE_KEY, '0');
      }

      // Initial state from localStorage
      const saved = localStorage.getItem(STATE_KEY);
      if(saved === '1'){
        // try to autoplay if user previously enabled it
        tryPlay();
      } else {
        updateButton(false);
      }

      // AUTOPLAY: best-effort attempt when the page loads.
      // Many browsers block autoplay with sound; we'll try unmuted first,
      // then fall back to muted playback (muted autoplay is usually allowed).
      // If playback succeeds muted, we listen for the first user gesture to unmute.
      async function attemptAutoplay(){
        // Respect explicit user opt-out
        if(localStorage.getItem(STATE_KEY) === '0') return;

        try{
          await audio.play();
          // played unmuted
          audio.muted = false;
          updateButton(true);
          localStorage.setItem(STATE_KEY, '1');
          return;
        }catch(err){
          // try muted autoplay fallback
          try{
            audio.muted = true;
            await audio.play();
            updateButton(true);
            // mark playing but note it's muted; user can unmute
            btn.classList.add('muted-play');
            // set preference to playing so next loads attempt play again
            localStorage.setItem(STATE_KEY, '1');

            // On first user gesture, unmute and update UI
            function handleFirstGesture(){
              audio.muted = false;
              btn.classList.remove('muted-play');
              updateButton(true);
              window.removeEventListener('click', handleFirstGesture);
              window.removeEventListener('keydown', handleFirstGesture);
            }

            window.addEventListener('click', handleFirstGesture, { once: true });
            window.addEventListener('keydown', handleFirstGesture, { once: true });
            return;
          }catch(err2){
            // autoplay failed entirely; leave button idle
            updateButton(false);
            return;
          }
        }
      }

      // Try autoplay after a short idle to avoid racing other scripts
      setTimeout(attemptAutoplay, 300);

      btn.addEventListener('click', (e)=>{
        e.preventDefault();
        if(audio.paused){
          tryPlay();
        } else {
          pause();
        }
      });

      // keyboard support
      btn.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          btn.click();
        }
      });
    })();
  </script>

</html>